<fieldset class='form-group no-border-top' data-hook='edit_product_catalog'>
  <div class='row'>
    <div class='col-4' data-hook='admin_product_catalog_form_name'>
      <%= f.field_container :name do %>
        <%= f.label :name, class: "required" %>
        <%= f.text_field :name, class: "fullwidth", required: true %>
      <% end %>
    </div>
  </div>
</fieldset>

<% if @product_catalog.persisted? %>
  <fieldset class='form-group no-border-bottom no-border-top' data-hook='variants_list_selection'>
    <div class='row'>
      <div class='col-12' data-hook='admin_product_catalog_form_item_ids'>
        <%= paginate @variants, theme: "solidus_admin" %>

        <% if @variants.present? %>
          <% cache [I18n.locale, @object, @variants] do %>
            <table class='index products-table' id='listing_products'>
              <colgroup>
                <col style='width: 10%'>
                <col style='width: 15%'>
                <col style='width: 20%'>
                <col style='width: 15%'>
                <col style='width: 20%'>
                <col style='width: 5%'>
                <col style='width: 10%'>
              </colgroup>

              <thead>
                <tr>
                  <th></th>
                  <th><%= t("spree.sku") %></th>
                  <th><%= t("spree.name") %></th>
                  <th><%= Spree::Variant.model_name.human %></th>
                  <th><%= Spree::Product.model_name.human %></th>
                  <th><%= link_to t("spree.select_all"), "#", id: "product-list-select-all" %></th>
                  <th class='align-center'></th>
                </tr>
              </thead>

              <tbody class='variants-list'>
                <% @variants.each do |variant| %>
                  <tr id='<%= spree_dom_id(variant) %>'>
                    <td>
                      <%= render "spree/admin/shared/image",
                                 image: set_product_feed_image(variant, @product_catalog),
                                 size: :mini %>
                    </td>
                    <td><%= variant.sku %></td>
                    <td><%= variant.name %></td>
                    <td><%= variant.display_option_text %></td>
                    <td>
                      <%= link_to t("spree.product_link"),
                        admin_product_path(variant.product) %>
                    </td>
                    <td class='align-center'>
                      <%= f.check_box :item_ids, {
                          checked: @product_catalog.selected?(variant.id),
                          class: "item_ids",
                          id: "item-ids"
                        },
                        variant.id %>
                    </td>
                    <td class='actions align-center' data-hook='admin_product_catalog_actions'>
                      <%= link_to t("spree.edit"),
                          edit_admin_product_catalog_variant_image_path(@product_catalog, variant, set_product_feed_image(variant, @product_catalog)), class: "edit btn btn-default btn-rounded" if variant.images.any? %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          <% end %>

          <%= paginate @variants, theme: "solidus_admin" %>
        <% else %>
          <div class='no-objects-found'>
            <%= render "spree/admin/shared/no_objects_found",
                       resource: Spree::Product,
                       new_resource_url: new_admin_product_url %>
          </div>
        <% end %>
      </div>
    </div>
  </fieldset>
<% end %>

<%= f.hidden_field :store_id, value: current_store.id %>
<%= f.hidden_field :item_ids, value: @product_catalog.item_ids.to_s %>
<%= hidden_field_tag :page, params[:page] %>
